framework:
    messenger:
        transports:
             commands: '%env(MESSENGER_TRANSPORT_DSN)%/commands'
             events: '%env(MESSENGER_TRANSPORT_DSN)%/events'

        routing:
             'App\Application\Command\CreateUserCommand': commands
             'App\Application\Command\ChangeUserPasswordCommand': commands
             'App\Application\Command\ChangeUserEmailCommand': commands

             'App\Domain\User\Event\UserCreated': events
             'App\Domain\User\Event\UserPasswordChanged': events
             'App\Domain\User\Event\UserEmailChanged': events

        default_bus: messenger.bus.commands
        buses:
            messenger.bus.commands:
                middleware:
                    - validation
            messenger.bus.events:
                default_middleware: allow_no_handlers
                middleware:
                    - validation
